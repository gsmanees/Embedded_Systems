/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Anees Kokadan
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2025 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 ******************************************************************************
 ******************************************************************************
 ******************************************************************************
	this program controls a dc motor when the distance from ultrasonic sensor is below 7cm

 */

#include <stdint.h>
#include "stm32_f446xx.h"

#define SENSOR_PIN 5	// PA5
#define MOTOR_PIN 6		// PA6


int main(void)
{
	GPIOA_CLK_EN();		// GPIOA clock enabled, we are using GPIOA pins here
	GPIOA->MODER&=~(0x3<<(SENSOR_PIN*2));	// SENSOR_PIN set as input
	GPIOA->MODER&=~(0X3<<(MOTOR_PIN*2));	// Initialize motor pin with 00
	// then set motor pin as general purpose output mode
	GPIOA->MODER|=(1<<MOTOR_PIN*2);			// Now MOTOR_PIN   is set as output

	/*
	 * Now, we need to calculate the distance by reading the value from ultrasonic sensor and
	 * if distance is below 7cm we need to make MOTOR ON
	 * ie, MOTOR_PIN should become ON when distance becomes below 7cm, otherwise it should
	 * be set to 0
	 */

	for(;;);
}
